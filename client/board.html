<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>你画我猜</title>
        <link href="images/CSS.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <!--主容器层-->
        <div id="main" class="main">
            <div>
                <div class="tx"></div>
                <div class="wz">
                    <div id="dround"></div>
                    <!--显示问题区域-->
                    <span id="question"></span>
                </div>
                <!--显示时间-->
                <div id="qTime" class="time">60</div>
                <div class="tc">
                    离开房间<img src="images/edit_undo.png" align="absmiddle" />
                </div>
            </div>
            <div class="qc"></div>
            <div>
                <!--绘图主层-->
                <div class="hbbox">
                    <!--绘图区域-->
                    <div id="hb" class="hb">
                        <canvas
                            id="paintArea"
                            width="525"
                            height="370"></canvas>
                    </div>
                </div>
                <!--工具选项区-->
                <div class="hbr">
                    <div id="operDiv">
                        <!--颜色选取区-->
                        <div id="ys" class="ys"></div>
                        <!--画笔大小选择区-->
                        <div id="bc" class="bc"></div>
                        <!--定义橡皮擦工具-->
                        <div id="ssx" class="tb">
                            <div id="btnRub" class="tb2">
                                <img src="images/01945.png" />
                            </div>
                            <div id="btnClear" class="tb3">
                                <img src="images/053753321.gif" />
                            </div>
                        </div>
                    </div>
                    <!-- 消息发布主层
                    <div id="msgArea" class="msgArea"></div>
                        <div class="bd">
                            <input
                                type="button"
                                id="btnSendMsg"
                                value="发送" />
                                <input
                                type="text"
                                size="13"
                                id="txtMsg" />
                    </div> -->
                    <input type="button" id="btnSubmitDraw" value="画完提交" />
                    <div>
                        <input type="text" size="13" id="txtGuess"></input>
                        <input type="button" id="btnSubmit" value="提交猜词" />
                    </div>
                </div>
            </div>
        </div>
        <!-- 消息层 -->
        <div id="msg"></div>
    </body>
    <script src="../js/jquery.js" charset="utf-8"></script>
    <script src="../js/painter.js" charset="utf-8"></script>
    <script src="../js/client_ajax.js" charset="utf-8"></script>
    <script>
        //检测是否支持Html5
        function isSupportHTML5() {
            return typeof Worker !== "undefined";
        }
        //初始化
        $(document).ready(function () {
            if (!isSupportHTML5()) {
                alert("您的浏览器不支持HTML5,请更换浏览器!");
            } else {
            $("#main").show();

                // 0. 初始化客户端

                // Client.connect(host, 9000);
                // Client.user.uname = user;
                
                // 1. 提交作画
                $("#btnSubmitDraw").click(function () {
                    var ctx = $("#paintArea")[0].getContext("2d");
                    var imageData = ctx.getImageData(0, 0, 525, 370);
                    Client.submitDraw(imageData);
                });

                // 2. 消息发布
                // $("#btnSendMsg").click(function () {
                //     var txt = $("#txtMsg").val();
                //     Client.sendMsg(txt);
                //     $("#txtMsg").val("");
                // });
                // $("#txtMsg").on("keydown", function (e) {
                //     if (e.keyCode == 13) {
                //         var txt = $("#txtMsg").val();
                //         Client.sendMsg(txt);
                //         $("#txtMsg").val("");
                //     }
                // });

                
            }
        });
    </script>
</html>
